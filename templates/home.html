{% extends 'base.html' %}
{% block body %}
{% load staticfiles %}
<div class="row">
    <div class="col-sm-4 col-md-3 profile">
        <img src="{% static 'img/edited3.PNG' %}" alt="profile picture"  id="profile"/>

    </div>
    <div class="col-md-6 col-sm-8">
        <div id="bio" class="text-center">
            <p>Hi, I'm John Gaitho, currently a BBIT Student at
                <a href="https://www.pacuniversity.ac.ke/">PAC University</a> in Nairobi-Kenya.Along with that, a I am a professional
                web developer(both front and back end). I use use either django or php for back end.Lately I have been working as a freelancer since 2017. </p>
        </div>
    </div>
    <div class="col-md-3" id="details">
        <h5><a href="{% static 'css/resume.pdf' %}">See my CV</a></h5>
        <h5><a href="mailto:johngaitho05@gmail.com">Email me</a></h5>
    </div>
</div>
<br/>
<hr style="width:80%"/>
<br />
<div class="row">
    <div class="col-md-6" id="message">
        <h3>Get in touch</h3>
        <p>Do you want a professional website for your business? or  are you a web developer
            looking for someone to work with? Either way, you just landed into the right place. Let's talk...
        </p>
        <div class="row">
            <div class="col-xs-12 col-sm-6">
                <button class="btn btn-success" data-target="#messageModal" data-toggle="modal">Message me</button>
            </div>
            <div class="col-xs-12 col-sm-6">
                <a href="{% url 'contactpage' %}">Use another channel</a>
            </div>
        </div>
    </div>
    <br />
    <div class="col-md-6">
        <h3>View my work</h3>
        <ul>
            <li><a href="{% url 'pythonjobs' %}">Python</a></li>
            <li><a href="{% url 'phpjobs' %}">Php</a></li>
            <li><a href="{% url 'vbjobs' %}">Visual Basic</a></li>
            <li><a href="{% url 'javascriptjobs' %}">HTML,CSS,JavaScript</a></li>
            <li><a href="{% url 'javajobs' %}">Java</a></li>
        </ul>
 <div class="modal fade" id="messageModal" tabindex="-1" data-keyboard="false" data-backdrop="static" onclick="validatemail()">
<div class="modal-dialog modal-lg">
    <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">Fill all the fields then click send</h4>
            <button class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
            <form action="{% url 'savemessage' %}" method="post" name="messageform" onsubmit="return validateForm()">
                {% csrf_token %}
                <div class="form-group">
                    <label for="inputfname">Your full name</label>
                    <input type="text" id="inputfname" name="name" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="inputlname">Your Email address</label>
                    <input type="text" id="inputlname"  name="email" class="form-control"/>
                    <span id="result" style="color:red" class="help-block"></span>
                </div>
                <div class="form-group">
                    <label for="message">Message</label>
                    <textarea name="message" id="message" cols="40" rows="5" class="form-control"></textarea>
                    <input type="hidden" name="page" value="home"/>
                </div>
                <div class="modal-footer">
            <input type="button" class="btn btn-primary" value="Send" onclick="validateall()"/>
            <button class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
            </form>
        </div>

    </div>
</div>
</div>
    </div>
</div>
    <hr class="bg-dark"/>
    <script type="text/javascript">

          function validateEmail(email) {
  var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return re.test(email);
}

function validatemail() {
  var myemail = document.forms["messageform"]["email"].value;
  var result = document.getElementById("result")
  if (!validateEmail(myemail) && myemail!="") {
    result.innerHTML = "Invalid email address";
    document.forms["messageform"]["email"].style.borderColor = "red";
    return false;
  } else {
      document.forms["messageform"]["email"].style.borderColor = "";
      result.innerHTML = "";
      return true
  }
}
function validateall(){
    var email = document.forms["messageform"]["email"].value;
    var name = document.forms["messageform"]["name"].value;
    var message = document.forms["messageform"]["message"].value;

    if(validatemail() && name!="" && email != "" && message!=""){
     form1 = document.forms["messageform"];
     alert("Message sent, John will get back to you as soon as possible");
     form1.submit();
    }else if(validatemail() && name=="" || email == "" || message==""){
        alert("All fields are reqiured");
    }else{
        alert("Invalid email address!");
    }
}

$("#validate").on("click", validate)
    </script>
{% endblock %}
